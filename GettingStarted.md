# Getting Started with ESCM

After having successfully deployed OSCM, an empty database has been created, as well as a platform operator organization with one user having administrative rights. There are no marketplaces or other organizations and users.

In order to start working with OSCM, the database must contain some more basic data. 
This guide describes a simple scenario for demo purposes using the existing organization and user.  

The complete OSCM documentation can be found [here](https://github.com/servicecatalog/documentation).  

The OSCM platform is configured using the administration portal which can be accessed using an URL in the following format:

`https:\\<host>:<port>\oscm-portal`

Login to the portal using the operator credentials that you setup by the installation  
(default: `administrator`, `admin123`)

## Configuration Settings

Check if the values for the configuration settings are correct for your environment: 

Go to the `Update configuration settings` menu option in the `Operation` menu.  

The most important configuration settings are the following:  
- `BASE_URL`: URL used to access the OSCM home page if OSCM does not require HTTPS for communication. If left empty, the BASE_URL_HTTPS setting is used. The base URL is provided in emails as a link for accessing OSCM.
- `REPORT_*` settings, if you want to test the reporting with the Birt engine.
- `KAFKA_BOOTSTRAP_SERVERS`, if you test event-based provisioning with Kafka (available as a prototype since `v17.4.0`).

## Adding a Currency

If you want to offer services that are not free of charge on a marketplace, you must add at least one currency (e.g EUR):

Go to the `Manage currencies` menu option in the `Operation` menu.

## Adding Email Notification

Go to the `Edit profile` menu option in the `Account` menu.

Enter a valid email address to which notification from the system are to be sent, and fill in the other mandatory fields for the platform operator. 

## Adding Organization Roles

In a productive environment, different organizations or departments are responsible for managing the OSCM platform, managing marketplaces, publishing services, subscribing to services etc. For a simple demo or testing environment, the platform operator organization created during the installation can be changed so that you as the platform operator can perform any operation: 

Go to the `Manage organization` menu option in the `Operation` menu.

Select the `PLATFORM_OPERATOR` organization ID and select the `Supplier` and `Technology provider` organization roles. Some additional fields requiring input will be shown. Fill them and save the changes. 
The platform operator organization can now manage services (import service definitions, prepare and publish services on marketplace). However, you as the platform operator user must also have the corresponding user roles. 
 
## Adding User Roles

Go to the `Manage users` menu option in the `Account` menu.

Select the `administrator` user and select the `Technology manager` and `Service manager` user roles. Save the changes.

In order for the roles to become effective, you (the `administrator` user) must logout and login to the administration portal again. 
You can see now additional menus (`Technical Service`, `Marketable Service`, `Price Model`) which contain options for preparing the services for their publishing on a marketplace.

## Creating a Marketplace

Go to the `Create marketplace` menu option in the `Marketplace` menu.

Specify a marketplace name (if you leave the ID blank, it will be generated by the system), stay with the the default settings, and select the platform operator organization as marketplace owner. Save the marketplace.

## Specifying the Provisioning Service

OSCM can be integrated with a service provisioning system via SOAP API or Kafka (since `v17.4.0`). There are some ready-to-use sample provisioning systems, which can be found in [OSCM releases](https://github.com/servicecatalog/development/releases):
- `oscm-integrationtests-pack.zip`
- `oscm-integration-app-pack.zip`

The packages contain web applications - mocks for SOAP-based provisioning systems. The corresponding service definitions (`TechnicalService.xml`) to be imported in OSCM are also included. 

In addition, there is a provisioning microservice, event-based with Kafka, packaged as Docker image on DockerHub.
- [`servicecatalog/provisioning-service`](https://hub.docker.com/r/servicecatalog/provisioning-service/)  
A sample service definition for this service can be found [here](https://github.com/servicecatalog/oscm-helm/blob/master/oscm-demo-helm/oscm-service/TechnicalServicesHelmWordPress.xml). 

 

## Importing Technical Service Definitions

The service definitions are to be prepared as XML files which are then imported into the system. They depend on the provisioning system they represent in OSCM. For testing, you can adapt and use one of the XML files mentioned above.  
The XML schema for service definitions can be found [here](https://github.com/servicecatalog/oscm/blob/master/oscm-serviceprovisioning/javares/TechnicalServices.xsd). More details on how to write service definitions can be found in the [Technology Provider Guide](https://github.com/servicecatalog/documentation/blob/master/Development/oscm-doc-user/resources/manuals/integration/en/TechProv.pdf).


Go to the `Import service definition` menu option in the `Technical service` menu.

Select the XML file which contains the service definition(s) and import it. The imported service(s) are listed. By clicking on a service, you can see its parameters and check whether it can connect with the provisioning service it represents.

## Preparing a Service for a Marketplace

Go to the `Define service` menu option in the `Marketable service` menu.

Select the technical service definition imported in the previous step. Fill in the mandatory fields and decide which parameters will be configurable by the user when subscribing to this service (select the `User option` check box for such parameters). 
Save the marketable service. 

Before you can publish this service on a marketplace, you need to define a price model:

Go to the `Define for service` menu item in the `Price model` menu.

Select the marketable service and choose `Free of charge`. Be aware that free services can only be subscribed to once per organization.

*Optional:*

If you want to create more subscriptions for the same service and organization, you must choose one of the paid price models (`pro rata` or `per time unit`). In this case, you must set the payment type for the service and/or customer:

Go to the `Manage payment types` menu option in the `Customer` menu. 

A table is shown with the default payment type `Invoice` for new and existing services and organizations.
Select all `Invoice` check boxes and save the changes.


## Publishing a Service on a Marketplace

Go to the `Define publishing options` menu option in the `Marketable service` menu.

Select the marketable service and the marketplace created previously. Save the changes.

Go to the `Activate or deactivate services` menu option in the `Marketable service` menu.

The marketable service is listed in a table. Select the check box in the `Active` column for this service and save the changes. If the provisioning service specified in the technical service definition is accessible, the service is activated and visible on the marketplace.

## Subscribe to Service

Click the `Go to Marketplace` link above the menus in the administration portal.

Select the marketplace and click the `Go to` button. You are redirected to the marketplace portal where the published service should be visible. 

Click the `Get it now` button to subscribe. The subscription wizard will guide you through the subscription process.

